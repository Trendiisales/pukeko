<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pukeko Social - Hybrid Version</title>
  
  <!-- Tailwind CSS via CDN (for development only) -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Basic styling as a fallback -->
  <style>
    /* Fallback styles if Tailwind isn't loading */
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      line-height: 1.5;
      color: #333;
      background-color: #f9f9f9;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .card {
      border: 1px solid #ddd;
      border-radius: 4px;
      padding: 15px;
      margin-bottom: 15px;
    }
    
    /* Make sure elements are visible */
    body, main, div, header, footer, section, article, nav, aside {
      display: block;
      visibility: visible;
      opacity: 1;
    }
  </style>
  
  <script>
    console.log('Page loading started');
    window.addEventListener('DOMContentLoaded', function() {
      console.log('DOM fully loaded');
    });
    window.addEventListener('load', function() {
      console.log('All resources loaded');
    });
  </script>
</head>
<body class="bg-gray-100">
  <!-- Main container -->
  <div class="container mx-auto p-4 bg-white rounded-lg shadow">
    <header class="flex justify-between items-center border-b pb-4 mb-6">
      <h1 class="text-2xl font-bold text-gray-800">Pukeko Social</h1>
      
      <!-- Mobile menu button - one of your original elements -->
      <button id="mobileMenuBtn" class="md:hidden px-2 py-1 border rounded">
        Menu
      </button>
      
      <!-- Nav links -->
      <nav id="navLinks" class="hidden md:block">
        <ul class="flex space-x-4">
          <li><a href="#" class="text-blue-600 hover:underline">Home</a></li>
          <li><a href="#" class="text-blue-600 hover:underline">Dashboard</a></li>
          <li><a href="#" class="text-blue-600 hover:underline">Settings</a></li>
        </ul>
      </nav>
    </header>
    
    <!-- Status messages -->
    <div id="statusMessages" class="mb-6">
      <div id="loadingSpinner" class="hidden p-4 bg-blue-100 text-blue-700 rounded">
        Loading...
      </div>
      <div id="errorMessage" class="hidden p-4 bg-red-100 text-red-700 rounded">
        Error message will appear here
      </div>
      <div id="successMessage" class="p-4 bg-green-100 text-green-700 rounded">
        The hybrid page is loading correctly! Firebase will initialize below.
      </div>
    </div>
    
    <!-- Main content section -->
    <main>
      <!-- Search section -->
      <div class="card p-4 mb-6 border rounded">
        <h2 class="text-xl font-semibold mb-2">Search</h2>
        <div class="flex">
          <input id="searchInput" type="text" placeholder="Search..." class="flex-1 p-2 border rounded-l" />
          <button id="searchBtn" class="px-4 py-2 bg-blue-500 text-white rounded-r">Search</button>
        </div>
        <div id="resultsContainer" class="mt-4">
          <!-- Search results will appear here -->
        </div>
      </div>
      
      <!-- Post creation section -->
      <div class="card p-4 mb-6 border rounded">
        <h2 class="text-xl font-semibold mb-2">Create Post</h2>
        <div class="mb-3">
          <label for="postTitle" class="block mb-1">Title</label>
          <input id="postTitle" type="text" class="w-full p-2 border rounded" />
        </div>
        <div class="mb-3">
          <label for="postContent" class="block mb-1">Content</label>
          <textarea id="postContent" class="w-full p-2 border rounded" rows="4"></textarea>
        </div>
        <div class="mb-3">
          <label for="postDateTime" class="block mb-1">Date/Time</label>
          <input id="postDateTime" type="datetime-local" class="p-2 border rounded" />
        </div>
        <button id="submitPostBtn" class="px-4 py-2 bg-green-500 text-white rounded">Submit Post</button>
      </div>
      
      <!-- History section -->
      <div class="card p-4 mb-6 border rounded">
        <h2 class="text-xl font-semibold mb-2">Post History</h2>
        <ul id="postHistoryList" class="divide-y">
          <!-- Post history items will appear here -->
          <li class="py-2">This is where post history will appear once Firebase is connected</li>
        </ul>
      </div>
      
      <!-- Dashboard section -->
      <div class="card p-4 border rounded">
        <h2 class="text-xl font-semibold mb-4">Dashboard</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
          <div class="p-4 bg-blue-100 rounded">
            <p class="text-sm text-blue-800">Total Posts</p>
            <p id="totalPostsEl" class="text-2xl font-bold">0</p>
          </div>
          <div class="p-4 bg-green-100 rounded">
            <p class="text-sm text-green-800">Total Engagement</p>
            <p id="totalEngagementEl" class="text-2xl font-bold">0</p>
          </div>
          <div class="p-4 bg-yellow-100 rounded">
            <p class="text-sm text-yellow-800">Average Likes</p>
            <p id="avgLikesEl" class="text-2xl font-bold">0</p>
          </div>
          <div class="p-4 bg-purple-100 rounded">
            <p class="text-sm text-purple-800">Best Platform</p>
            <p id="bestPlatformEl" class="text-2xl font-bold">-</p>
          </div>
        </div>
        
        <!-- Chart placeholder -->
        <div id="engagementChart" class="h-64 bg-gray-100 rounded flex items-center justify-center">
          <p>Engagement chart will appear here</p>
        </div>
      </div>
    </main>
  </div>

  <!-- Firebase SDK - Using version 9 (modular) -->
  <script type="module">
    // Import Firebase at the top level of the module
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    
    try {
      // Log the import operation
      console.log('Importing Firebase...');
      console.log('Firebase module imported');
      
      // Your web app's Firebase configuration
      const firebaseConfig = {
        projectId: 'pukeko-social'
        // Add other config options if needed
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      console.log('Firebase initialized successfully');
      
      // Update status message
      const successMessage = document.getElementById('successMessage');
      if (successMessage) {
        successMessage.textContent = 'Firebase initialized successfully! The app is ready to use.';
      }
      
      // Set up mobile menu button
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const navLinks = document.getElementById('navLinks');
      
      if (mobileMenuBtn && navLinks) {
        mobileMenuBtn.addEventListener('click', function() {
          // Toggle the nav links
          navLinks.classList.toggle('hidden');
          console.log('Mobile menu clicked');
        });
      }
      
      // Set up search button
      const searchBtn = document.getElementById('searchBtn');
      const searchInput = document.getElementById('searchInput');
      const resultsContainer = document.getElementById('resultsContainer');
      
      if (searchBtn && searchInput && resultsContainer) {
        searchBtn.addEventListener('click', function() {
          const query = searchInput.value.trim();
          if (query) {
            // Show loading
            const loadingSpinner = document.getElementById('loadingSpinner');
            if (loadingSpinner) loadingSpinner.classList.remove('hidden');
            
            // Simulate search (replace with actual search later)
            setTimeout(() => {
              resultsContainer.innerHTML = `
                <div class="p-3 bg-gray-100 rounded">
                  <p>Search results for: <strong>${query}</strong></p>
                  <p>This is a placeholder for real search results.</p>
                </div>
              `;
              if (loadingSpinner) loadingSpinner.classList.add('hidden');
            }, 1000);
          }
        });
      }
      
      // Set up post submission
      const submitPostBtn = document.getElementById('submitPostBtn');
      const postTitle = document.getElementById('postTitle');
      const postContent = document.getElementById('postContent');
      const postDateTime = document.getElementById('postDateTime');
      
      if (submitPostBtn && postTitle && postContent && postDateTime) {
        submitPostBtn.addEventListener('click', function() {
          // Validate
          if (!postTitle.value.trim() || !postContent.value.trim() || !postDateTime.value) {
            const errorMessage = document.getElementById('errorMessage');
            if (errorMessage) {
              errorMessage.textContent = 'Please fill out all fields';
              errorMessage.classList.remove('hidden');
              setTimeout(() => errorMessage.classList.add('hidden'), 3000);
            }
            return;
          }
          
          // Show success (would normally save to Firebase)
          const successMessage = document.getElementById('successMessage');
          if (successMessage) {
            successMessage.textContent = 'Post submitted successfully!';
            setTimeout(() => {
              successMessage.textContent = 'Firebase initialized successfully! The app is ready to use.';
            }, 3000);
          }
          
          // Clear form
          postTitle.value = '';
          postContent.value = '';
          postDateTime.value = '';
        });
      }
      
    } catch (error) {
      console.error('Firebase error:', error);
      
      // Show error message
      const errorMessage = document.getElementById('errorMessage');
      if (errorMessage) {
        errorMessage.textContent = `Firebase error: ${error.message}`;
        errorMessage.classList.remove('hidden');
      }
      
      // Hide success message
      const successMessage = document.getElementById('successMessage');
      if (successMessage) {
        successMessage.classList.add('hidden');
      }
    }
  </script>
</body>
</html>